{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport classnames from 'classnames';\nimport { BrandText, Icon, Link, withSource } from 'components';\nimport { TrackEventHome } from 'configs/trackEventLabels';\nimport { AssetImage } from 'constant/uikit';\nimport React from 'react';\nimport { trackClickEvent } from 'utils/piwik';\nimport styles from \"./TopDownLoad.less\";\nvar Item = _Flex.Item;\n\nvar TopDownLoad =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TopDownLoad, _React$Component);\n\n  function TopDownLoad(props) {\n    var _this;\n\n    _classCallCheck(this, TopDownLoad);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TopDownLoad).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClose\", function () {\n      _this.setState({\n        show: false\n      });\n\n      trackClickEvent({\n        category: TrackEventHome.Category,\n        label: TrackEventHome.TopDownload.Close\n      });\n    });\n\n    var _this$props = _this.props,\n        utm = _this$props.utm,\n        ua = _this$props.ua;\n    _this.state = {\n      show: !ua.get('isNuomiApp') && !ua.get('isAhsApp') && !ua.get('isAlipay') && !ua.get('isApp') && !utm.get('isAnlaiye') && !utm.get('isChangyou') && !utm.get('isSichuanYiDong') && !utm.get('isWacai') && !utm.get('isCmblife') && !utm.get('isHnyd')\n    };\n    return _this;\n  }\n\n  _createClass(TopDownLoad, [{\n    key: \"render\",\n    value: function render() {\n      var show = this.state.show;\n      var _this$props$query = this.props.query,\n          utm_source = _this$props$query.utm_source,\n          utm_medium = _this$props$query.utm_medium,\n          utm_campaign = _this$props$query.utm_campaign;\n      var isAhsForBaidu = utm_source === 'm_ahs' && utm_medium === 'm_ahs_homepage_footer_nav' && utm_campaign === 'm_xhj';\n\n      if (!show || isAhsForBaidu) {\n        return false;\n      }\n\n      return React.createElement(_Flex, {\n        className: classnames(styles.download_box, this.props.fixed && styles.fixed)\n      }, React.createElement(Icon, {\n        className: styles.btn_close,\n        type: require('svg/close-circle.svg'),\n        onClick: this.handleClose\n      }), React.createElement(Item, {\n        className: styles.text_box\n      }, React.createElement(\"img\", {\n        className: styles.logo,\n        src: AssetImage.Common.Download,\n        alt: \"\"\n      }), React.createElement(\"div\", null, React.createElement(\"span\", {\n        className: styles.text1\n      }, \"\\u4E0B\\u8F7D\", React.createElement(BrandText, null), \"APP\"), React.createElement(\"br\", null), React.createElement(\"span\", {\n        className: styles.text2\n      }, \"0\\u62BC\\u91D1\\u79DF\\u673A\\uFF0C\\u5E74\\u5E74\\u7528\\u65B0\\u6B3E\"))), React.createElement(Link // native={true}\n      , {\n        className: styles.btn,\n        to: \"/site/appdownload?utm_source=xhj&utm_medium=header&utm_campaign=download\",\n        trackEvent: {\n          category: TrackEventHome.Category,\n          label: TrackEventHome.TopDownload.Download\n        }\n      }, \"\\u7ACB\\u5373\\u4E0B\\u8F7D\"));\n    }\n  }]);\n\n  return TopDownLoad;\n}(React.Component);\n\nexport default withSource(TopDownLoad);","map":{"version":3,"sources":["/Users/viser/mobile-next/src/containers/Home/TopDownLoad.tsx"],"names":["classnames","BrandText","Icon","Link","withSource","TrackEventHome","AssetImage","React","trackClickEvent","styles","Item","TopDownLoad","props","setState","show","category","Category","label","TopDownload","Close","utm","ua","state","get","query","utm_source","utm_medium","utm_campaign","isAhsForBaidu","download_box","fixed","btn_close","require","handleClose","text_box","logo","Common","Download","text1","text2","btn","Component"],"mappings":"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","sourcesContent":["import { Flex } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { BrandText, Icon, Link, withSource } from 'components'\nimport { SourceProps } from 'components/withSource'\nimport { TrackEventHome } from 'configs/trackEventLabels'\nimport { AssetImage } from 'constant/uikit'\nimport React from 'react'\nimport { trackClickEvent } from 'utils/piwik'\nimport styles from './TopDownLoad.less'\n\nconst Item = Flex.Item\n\ntype TopDownLoadStates = Readonly<{ show: boolean }>\n\ninterface TopDownLoadProps {\n  fixed?: boolean\n  query: any\n}\n\nclass TopDownLoad extends React.Component<TopDownLoadProps & SourceProps, TopDownLoadStates> {\n  constructor(props: TopDownLoadProps & SourceProps) {\n    super(props)\n    const { utm, ua } = this.props\n    this.state = {\n      show:\n        !ua.get('isNuomiApp') &&\n        !ua.get('isAhsApp') &&\n        !ua.get('isAlipay') &&\n        !ua.get('isApp') &&\n        !utm.get('isAnlaiye') &&\n        !utm.get('isChangyou') &&\n        !utm.get('isSichuanYiDong') &&\n        !utm.get('isWacai') &&\n        !utm.get('isCmblife') &&\n        !utm.get('isHnyd'),\n    }\n  }\n\n  handleClose = () => {\n    this.setState({ show: false })\n    trackClickEvent({ category: TrackEventHome.Category, label: TrackEventHome.TopDownload.Close })\n  }\n\n  render() {\n    const { show } = this.state\n    const {\n      query: { utm_source, utm_medium, utm_campaign },\n    } = this.props\n    const isAhsForBaidu =\n      utm_source === 'm_ahs' && utm_medium === 'm_ahs_homepage_footer_nav' && utm_campaign === 'm_xhj'\n\n    if (!show || isAhsForBaidu) {\n      return false\n    }\n\n    return (\n      <Flex className={classnames(styles.download_box, this.props.fixed && styles.fixed)}>\n        <Icon className={styles.btn_close} type={require('svg/close-circle.svg')} onClick={this.handleClose} />\n        <Item className={styles.text_box}>\n          <img className={styles.logo} src={AssetImage.Common.Download} alt=\"\" />\n          <div>\n            <span className={styles.text1}>\n              下载<BrandText />APP\n            </span>\n            <br />\n            <span className={styles.text2}>0押金租机，年年用新款</span>\n          </div>\n        </Item>\n        <Link\n          // native={true}\n          className={styles.btn}\n          to=\"/site/appdownload?utm_source=xhj&utm_medium=header&utm_campaign=download\"\n          trackEvent={{ category: TrackEventHome.Category, label: TrackEventHome.TopDownload.Download }}\n        >\n          立即下载\n        </Link>\n      </Flex>\n    )\n  }\n}\n\nexport default withSource<TopDownLoadProps>(TopDownLoad)\n"]},"metadata":{},"sourceType":"module"}