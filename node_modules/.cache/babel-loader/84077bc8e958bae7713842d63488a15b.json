{"ast":null,"code":"import _Flex from \"antd-mobile/lib/flex\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport classnames from 'classnames';\nimport { LazyImage, Swiper } from 'components';\nimport { TrackEventHome } from 'configs/trackEventLabels';\nimport Router from 'next/router';\nimport React from 'react';\nimport { trackClickEvent } from 'utils/piwik';\nimport styles from \"./Brands.less\";\n\nvar Brands =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Brands, _React$Component);\n\n  function Brands() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Brands);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Brands)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showMore: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (item, index) {\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(index === 3 && item.get('is_more_icon'))) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  if (_this.state.showMore) {\n                    trackClickEvent({\n                      category: TrackEventHome.Category,\n                      label: TrackEventHome.BrandIcon.MoreIconClose\n                    });\n                  } else {\n                    trackClickEvent({\n                      category: TrackEventHome.Category,\n                      label: TrackEventHome.BrandIcon.MoreIconOpen\n                    });\n                  }\n\n                  _this.setState({\n                    showMore: !_this.state.showMore\n                  });\n\n                  _context.next = 8;\n                  break;\n\n                case 5:\n                  trackClickEvent({\n                    category: TrackEventHome.Category,\n                    label: \"\".concat(TrackEventHome.BrandIcon.BrandIcon, \"\\t\").concat(item.get('brand_id'))\n                  });\n                  _context.next = 8;\n                  return Router.push(\"/product/brands?brand_id=\".concat(item.get('brand_id')));\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))\n      );\n    });\n\n    return _this;\n  }\n\n  _createClass(Brands, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var list = this.props.list;\n\n      if (!list) {\n        return null;\n      }\n\n      var showMore = this.state.showMore;\n      var listStart = list.filter(function (_, index) {\n        return index < 4;\n      });\n      var listEnd = list.filter(function (_, index) {\n        return index >= 4;\n      });\n      var swiperProps = {\n        className: styles.swiper,\n        dots: false,\n        slidesPerView: listEnd.size > 4 ? 3.8 : 4,\n        spaceBetween: 12,\n        freeMode: true\n      };\n      return React.createElement(\"div\", {\n        className: styles.container\n      }, React.createElement(_Flex, {\n        className: styles.brands,\n        justify: \"between\"\n      }, listStart.map(function (item, key) {\n        return React.createElement(_Flex, {\n          direction: \"column\",\n          justify: \"between\",\n          key: key,\n          className: classnames(styles.brand, key === 3 && item.get('is_more_icon') && showMore && styles.active),\n          onClick: _this2.handleClick(item, key)\n        }, React.createElement(LazyImage, {\n          className: styles.thumb,\n          src: item.get('main_icon')\n        }));\n      })), React.createElement(\"div\", {\n        className: classnames(styles.more_list, showMore && styles.active)\n      }, React.createElement(Swiper, swiperProps, listEnd.map(function (item, key) {\n        return React.createElement(\"div\", {\n          key: key,\n          className: styles.brandLogo\n        }, React.createElement(LazyImage, {\n          src: item.get('sub_icon'),\n          onClick: _this2.handleClick(item)\n        }));\n      }))));\n    }\n  }]);\n\n  return Brands;\n}(React.Component);\n\nexport default Brands;","map":{"version":3,"sources":["/Users/viser/mobile-next/src/containers/Home/Brands.tsx"],"names":["classnames","LazyImage","Swiper","TrackEventHome","Router","React","trackClickEvent","styles","Brands","showMore","item","index","get","state","category","Category","label","BrandIcon","MoreIconClose","MoreIconOpen","setState","push","list","props","listStart","filter","_","listEnd","swiperProps","className","swiper","dots","slidesPerView","size","spaceBetween","freeMode","container","brands","map","key","brand","active","handleClick","thumb","more_list","brandLogo","Component"],"mappings":";;;;;;;;;;AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,YAAlC;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,aAAhC;AACA,OAAOC,MAAP;;IAUMC,M;;;;;;;;;;;;;;;;;;4DACoC;AACtCC,MAAAA,QAAQ,EAAE;AAD4B,K;;kEAG1B,UAACC,IAAD,EAAYC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,iCAA+B;AAAA;AAAA;AAAA;AAAA;AAAA,wBACvCA,KAAK,KAAK,CAAV,IAAeD,IAAI,CAACE,GAAL,CAAS,cAAT,CADwB;AAAA;AAAA;AAAA;;AAEzC,sBAAI,MAAKC,KAAL,CAAWJ,QAAf,EAAyB;AACvBH,oBAAAA,eAAe,CAAC;AAAEQ,sBAAAA,QAAQ,EAAEX,cAAc,CAACY,QAA3B;AAAqCC,sBAAAA,KAAK,EAAEb,cAAc,CAACc,SAAf,CAAyBC;AAArE,qBAAD,CAAf;AACD,mBAFD,MAEO;AACLZ,oBAAAA,eAAe,CAAC;AAAEQ,sBAAAA,QAAQ,EAAEX,cAAc,CAACY,QAA3B;AAAqCC,sBAAAA,KAAK,EAAEb,cAAc,CAACc,SAAf,CAAyBE;AAArE,qBAAD,CAAf;AACD;;AACD,wBAAKC,QAAL,CAAc;AAAEX,oBAAAA,QAAQ,EAAE,CAAC,MAAKI,KAAL,CAAWJ;AAAxB,mBAAd;;AAPyC;AAAA;;AAAA;AASzCH,kBAAAA,eAAe,CAAC;AACdQ,oBAAAA,QAAQ,EAAEX,cAAc,CAACY,QADX;AAEdC,oBAAAA,KAAK,YAAKb,cAAc,CAACc,SAAf,CAAyBA,SAA9B,eAA4CP,IAAI,CAACE,GAAL,CAAS,UAAT,CAA5C;AAFS,mBAAD,CAAf;AATyC;AAAA,yBAanCR,MAAM,CAACiB,IAAP,oCAAwCX,IAAI,CAACE,GAAL,CAAS,UAAT,CAAxC,EAbmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA/B;AAAA;AAAA,K;;;;;;;6BAiBL;AAAA;;AAAA,UACCU,IADD,GACU,KAAKC,KADf,CACCD,IADD;;AAGP,UAAI,CAACA,IAAL,EAAW;AACT,eAAO,IAAP;AACD;;AALM,UAOCb,QAPD,GAOc,KAAKI,KAPnB,CAOCJ,QAPD;AAQP,UAAMe,SAAS,GAAGF,IAAI,CAACG,MAAL,CAAY,UAACC,CAAD,EAASf,KAAT;AAAA,eAA2BA,KAAK,GAAG,CAAnC;AAAA,OAAZ,CAAlB;AACA,UAAMgB,OAAO,GAAGL,IAAI,CAACG,MAAL,CAAY,UAACC,CAAD,EAASf,KAAT;AAAA,eAA2BA,KAAK,IAAI,CAApC;AAAA,OAAZ,CAAhB;AAEA,UAAMiB,WAAW,GAAG;AAClBC,QAAAA,SAAS,EAAEtB,MAAM,CAACuB,MADA;AAElBC,QAAAA,IAAI,EAAE,KAFY;AAGlBC,QAAAA,aAAa,EAAEL,OAAO,CAACM,IAAR,GAAe,CAAf,GAAmB,GAAnB,GAAyB,CAHtB;AAIlBC,QAAAA,YAAY,EAAE,EAJI;AAKlBC,QAAAA,QAAQ,EAAE;AALQ,OAApB;AAQA,aACE;AAAK,QAAA,SAAS,EAAE5B,MAAM,CAAC6B;AAAvB,SACE;AAAM,QAAA,SAAS,EAAE7B,MAAM,CAAC8B,MAAxB;AAAgC,QAAA,OAAO,EAAC;AAAxC,SACGb,SAAS,CAACc,GAAV,CAAc,UAAC5B,IAAD,EAAY6B,GAAZ,EAA4B;AACzC,eACE;AACE,UAAA,SAAS,EAAC,QADZ;AAEE,UAAA,OAAO,EAAC,SAFV;AAGE,UAAA,GAAG,EAAEA,GAHP;AAIE,UAAA,SAAS,EAAEvC,UAAU,CAACO,MAAM,CAACiC,KAAR,EAAeD,GAAG,KAAK,CAAR,IAAa7B,IAAI,CAACE,GAAL,CAAS,cAAT,CAAb,IAAyCH,QAAzC,IAAqDF,MAAM,CAACkC,MAA3E,CAJvB;AAKE,UAAA,OAAO,EAAE,MAAI,CAACC,WAAL,CAAiBhC,IAAjB,EAAuB6B,GAAvB;AALX,WAOE,oBAAC,SAAD;AAAW,UAAA,SAAS,EAAEhC,MAAM,CAACoC,KAA7B;AAAoC,UAAA,GAAG,EAAEjC,IAAI,CAACE,GAAL,CAAS,WAAT;AAAzC,UAPF,CADF;AAWD,OAZA,CADH,CADF,EAgBE;AAAK,QAAA,SAAS,EAAEZ,UAAU,CAACO,MAAM,CAACqC,SAAR,EAAmBnC,QAAQ,IAAIF,MAAM,CAACkC,MAAtC;AAA1B,SACE,oBAAC,MAAD,EAAYb,WAAZ,EACGD,OAAO,CAACW,GAAR,CAAY,UAAC5B,IAAD,EAAY6B,GAAZ;AAAA,eACX;AAAK,UAAA,GAAG,EAAEA,GAAV;AAAe,UAAA,SAAS,EAAEhC,MAAM,CAACsC;AAAjC,WACE,oBAAC,SAAD;AAAW,UAAA,GAAG,EAAEnC,IAAI,CAACE,GAAL,CAAS,UAAT,CAAhB;AAAsC,UAAA,OAAO,EAAE,MAAI,CAAC8B,WAAL,CAAiBhC,IAAjB;AAA/C,UADF,CADW;AAAA,OAAZ,CADH,CADF,CAhBF,CADF;AA4BD;;;;EApEkBL,KAAK,CAACyC,S;;AAuE3B,eAAetC,MAAf","sourcesContent":["import { Flex } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { LazyImage, Swiper } from 'components'\nimport { TrackEventHome } from 'configs/trackEventLabels'\nimport Router from 'next/router'\nimport React from 'react'\nimport { trackClickEvent } from 'utils/piwik'\nimport styles from './Brands.less'\n\nexport interface BrandsProps {\n  list: any\n}\n\nexport interface BrandsState {\n  showMore: boolean\n}\n\nclass Brands extends React.Component<BrandsProps, BrandsState> {\n  readonly state: Readonly<BrandsState> = {\n    showMore: false,\n  }\n  handleClick = (item: any, index?: number) => async () => {\n    if (index === 3 && item.get('is_more_icon')) {\n      if (this.state.showMore) {\n        trackClickEvent({ category: TrackEventHome.Category, label: TrackEventHome.BrandIcon.MoreIconClose })\n      } else {\n        trackClickEvent({ category: TrackEventHome.Category, label: TrackEventHome.BrandIcon.MoreIconOpen })\n      }\n      this.setState({ showMore: !this.state.showMore })\n    } else {\n      trackClickEvent({\n        category: TrackEventHome.Category,\n        label: `${TrackEventHome.BrandIcon.BrandIcon}\\t${item.get('brand_id')}`,\n      })\n      await Router.push(`/product/brands?brand_id=${item.get('brand_id')}`)\n    }\n  }\n\n  render() {\n    const { list } = this.props\n\n    if (!list) {\n      return null\n    }\n\n    const { showMore } = this.state\n    const listStart = list.filter((_: any, index: number) => index < 4)\n    const listEnd = list.filter((_: any, index: number) => index >= 4)\n\n    const swiperProps = {\n      className: styles.swiper,\n      dots: false,\n      slidesPerView: listEnd.size > 4 ? 3.8 : 4,\n      spaceBetween: 12,\n      freeMode: true,\n    }\n\n    return (\n      <div className={styles.container}>\n        <Flex className={styles.brands} justify=\"between\">\n          {listStart.map((item: any, key: number) => {\n            return (\n              <Flex\n                direction=\"column\"\n                justify=\"between\"\n                key={key}\n                className={classnames(styles.brand, key === 3 && item.get('is_more_icon') && showMore && styles.active)}\n                onClick={this.handleClick(item, key)}\n              >\n                <LazyImage className={styles.thumb} src={item.get('main_icon')} />\n              </Flex>\n            )\n          })}\n        </Flex>\n        <div className={classnames(styles.more_list, showMore && styles.active)}>\n          <Swiper {...swiperProps}>\n            {listEnd.map((item: any, key: number) => (\n              <div key={key} className={styles.brandLogo}>\n                <LazyImage src={item.get('sub_icon')} onClick={this.handleClick(item)} />\n              </div>\n            ))}\n          </Swiper>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Brands\n"]},"metadata":{},"sourceType":"module"}