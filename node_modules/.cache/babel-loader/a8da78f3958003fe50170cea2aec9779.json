{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar LoadScript =\n/*#__PURE__*/\nfunction () {\n  function LoadScript(url, name) {\n    _classCallCheck(this, LoadScript);\n\n    _defineProperty(this, \"isLoaded\", false);\n\n    this.url = url;\n    this.name = name;\n    // FIXME: constructor public members\n    this.url = url;\n    this.name = name;\n    if (!window) throw new Error('must init in client');\n\n    if (window[name]) {\n      this.isLoaded = true;\n      return;\n    }\n\n    LoadScript.script = document.createElement('script');\n    LoadScript.script.type = 'text/javascript';\n    LoadScript.script.src = url;\n    LoadScript.script.async = true;\n    var el = document.getElementsByTagName('script')[0];\n    el.parentNode.insertBefore(LoadScript.script, el);\n  }\n\n  _createClass(LoadScript, [{\n    key: \"load\",\n    value: function load() {\n      var _this = this;\n\n      return new _Promise(function (resolve) {\n        if (window[_this.name]) {\n          _this.isLoaded = true;\n          resolve();\n        } else {\n          LoadScript.script.addEventListener('load', function () {\n            _this.isLoaded = true;\n            resolve();\n          });\n        }\n      });\n    }\n  }]);\n\n  return LoadScript;\n}();\n\nexport { LoadScript as default };","map":{"version":3,"sources":["/Users/viser/mobile-next/src/utils/loadScript.ts"],"names":["LoadScript","url","name","window","Error","isLoaded","script","document","createElement","type","src","async","el","getElementsByTagName","parentNode","insertBefore","resolve","addEventListener"],"mappings":";;;;;IAAqBA,U;;;AAInB,sBAAmBC,GAAnB,EAAuCC,IAAvC,EAAqD;AAAA;;AAAA,sCAF1C,KAE0C;;AAAA;AAAA;AACnD;AACA,SAAKD,GAAL,GAAWA,GAAX;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,QAAI,CAACC,MAAL,EAAa,MAAM,IAAIC,KAAJ,CAAU,qBAAV,CAAN;;AACb,QAAID,MAAM,CAACD,IAAD,CAAV,EAAkB;AAChB,WAAKG,QAAL,GAAgB,IAAhB;AACA;AACD;;AACDL,IAAAA,UAAU,CAACM,MAAX,GAAoBC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAApB;AACAR,IAAAA,UAAU,CAACM,MAAX,CAAkBG,IAAlB,GAAyB,iBAAzB;AACAT,IAAAA,UAAU,CAACM,MAAX,CAAkBI,GAAlB,GAAwBT,GAAxB;AACAD,IAAAA,UAAU,CAACM,MAAX,CAAkBK,KAAlB,GAA0B,IAA1B;AACA,QAAMC,EAAE,GAAGL,QAAQ,CAACM,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAX;AACAD,IAAAA,EAAE,CAACE,UAAH,CAAeC,YAAf,CAA4Bf,UAAU,CAACM,MAAvC,EAA+CM,EAA/C;AACD;;;;2BAEM;AAAA;;AACL,aAAO,aAAY,UAAAI,OAAO,EAAI;AAC5B,YAAIb,MAAM,CAAC,KAAI,CAACD,IAAN,CAAV,EAAuB;AACrB,UAAA,KAAI,CAACG,QAAL,GAAgB,IAAhB;AACAW,UAAAA,OAAO;AACR,SAHD,MAGO;AACLhB,UAAAA,UAAU,CAACM,MAAX,CAAkBW,gBAAlB,CAAmC,MAAnC,EAA2C,YAAM;AAC/C,YAAA,KAAI,CAACZ,QAAL,GAAgB,IAAhB;AACAW,YAAAA,OAAO;AACR,WAHD;AAID;AACF,OAVM,CAAP;AAWD;;;;;;SAjCkBhB,U","sourcesContent":["export default class LoadScript {\n  static script: HTMLScriptElement\n  isLoaded = false\n\n  constructor(public url: string, public name: string) {\n    // FIXME: constructor public members\n    this.url = url\n    this.name = name\n    if (!window) throw new Error('must init in client')\n    if (window[name]) {\n      this.isLoaded = true\n      return\n    }\n    LoadScript.script = document.createElement('script')\n    LoadScript.script.type = 'text/javascript'\n    LoadScript.script.src = url\n    LoadScript.script.async = true\n    const el = document.getElementsByTagName('script')[0]\n    el.parentNode!.insertBefore(LoadScript.script, el)\n  }\n\n  load() {\n    return new Promise(resolve => {\n      if (window[this.name]) {\n        this.isLoaded = true\n        resolve()\n      } else {\n        LoadScript.script.addEventListener('load', () => {\n          this.isLoaded = true\n          resolve()\n        })\n      }\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}