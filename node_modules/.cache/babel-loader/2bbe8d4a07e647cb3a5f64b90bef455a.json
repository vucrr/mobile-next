{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _handleActions;\n\nimport { FETCH_ADDRESS_FORM, FETCH_CITY_LIST, FETCH_SEARCH_LIST, FETCH_SELECT_LIST, SAVE_ADDRESS_FORM } from 'constant/index';\nimport { fromJS } from 'immutable';\nimport { handleActions } from 'redux-actions';\nvar MSG;\n\n(function (MSG) {\n  MSG[\"Loading\"] = \"\\u52A0\\u8F7D\\u4E2D...\";\n  MSG[\"Fail\"] = \"\\u52A0\\u8F7D\\u5931\\u8D25\";\n  MSG[\"Null\"] = \"\";\n})(MSG || (MSG = {}));\n\nvar initial = {\n  form: {},\n  city: {\n    hot: [],\n    all: {}\n  },\n  select: {\n    pois: [],\n    count: 0,\n    msg: MSG.Loading\n  }\n};\nexport default handleActions((_handleActions = {}, _defineProperty(_handleActions, FETCH_ADDRESS_FORM, function (state, _ref) {\n  var payload = _ref.payload;\n  var res = payload;\n  return state.set('form', fromJS(res));\n}), _defineProperty(_handleActions, SAVE_ADDRESS_FORM, function (state, _ref2) {\n  var payload = _ref2.payload;\n  var res = payload;\n  return state.set('result', fromJS(res));\n}), _defineProperty(_handleActions, FETCH_CITY_LIST, function (state, _ref3) {\n  var payload = _ref3.payload;\n  var city = state.get('city');\n  var newCity = city.set('hot', fromJS(payload.hot_citys)).set('all', fromJS(payload.all_citys));\n  return state.set('city', newCity);\n}), _defineProperty(_handleActions, FETCH_SELECT_LIST, function (state, _ref4) {\n  var payload = _ref4.payload;\n  var res = payload;\n  var oldSelect = state.get('select');\n\n  if (res.regeocode) {\n    var select = oldSelect.set('pois', fromJS(res.regeocode.pois)).set('msg', fromJS('')).set('count', fromJS(res.regeocode.pois.length));\n    return state.set('select', select);\n  } else {\n    return state.set('geocode', payload);\n  }\n}), _defineProperty(_handleActions, FETCH_SEARCH_LIST, function (state, _ref5) {\n  var payload = _ref5.payload;\n  var poiList = payload;\n  var oldSelect = state.get('select');\n  var pois;\n  var msg;\n  var count;\n\n  if (poiList === MSG.Fail) {\n    pois = [];\n    msg = MSG.Fail;\n    count = 0;\n  } else if (poiList === 'no_data') {\n    pois = [];\n    msg = MSG.Null;\n    count = -1;\n  } else {\n    pois = poiList.pois;\n    msg = '';\n    count = poiList.count;\n  }\n\n  var select = oldSelect.set('pois', fromJS(pois)).set('msg', fromJS(msg)).set('count', fromJS(count));\n  return state.set('select', select);\n}), _handleActions), fromJS(initial));","map":{"version":3,"sources":["/Users/viser/mobile-next/src/reducers/myTrade/address.ts"],"names":["FETCH_ADDRESS_FORM","FETCH_CITY_LIST","FETCH_SEARCH_LIST","FETCH_SELECT_LIST","SAVE_ADDRESS_FORM","fromJS","handleActions","MSG","initial","form","city","hot","all","select","pois","count","msg","Loading","state","payload","res","set","get","newCity","hot_citys","all_citys","oldSelect","regeocode","length","poiList","Fail","Null"],"mappings":"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","sourcesContent":["import {\n  FETCH_ADDRESS_FORM,\n  FETCH_CITY_LIST,\n  FETCH_SEARCH_LIST,\n  FETCH_SELECT_LIST,\n  SAVE_ADDRESS_FORM,\n} from 'constant/index'\nimport { fromJS } from 'immutable'\nimport { AddressForm } from 'interfaces/trade'\nimport { handleActions } from 'redux-actions'\n\nenum MSG {\n  Loading = '加载中...',\n  Fail = '加载失败',\n  Null = '',\n}\n\nconst initial: any = {\n  form: {},\n  city: {\n    hot: [],\n    all: {},\n  },\n  select: {\n    pois: [],\n    count: 0,\n    msg: MSG.Loading,\n  },\n}\n\nexport default handleActions(\n  {\n    [FETCH_ADDRESS_FORM](state, { payload }) {\n      const res: AddressForm = payload\n      return state.set('form', fromJS(res))\n    },\n    [SAVE_ADDRESS_FORM](state, { payload }) {\n      const res: AddressForm = payload\n      return state.set('result', fromJS(res))\n    },\n    [FETCH_CITY_LIST](state, { payload }) {\n      const city = state.get('city')\n      const newCity = city.set('hot', fromJS(payload.hot_citys)).set('all', fromJS(payload.all_citys))\n      return state.set('city', newCity)\n    },\n    [FETCH_SELECT_LIST](state, { payload }) {\n      const res = payload\n      const oldSelect = state.get('select')\n      if (res.regeocode) {\n        const select = oldSelect\n          .set('pois', fromJS(res.regeocode.pois))\n          .set('msg', fromJS(''))\n          .set('count', fromJS(res.regeocode.pois.length))\n        return state.set('select', select)\n      } else {\n        return state.set('geocode', payload)\n      }\n    },\n    [FETCH_SEARCH_LIST](state, { payload }) {\n      const poiList = payload\n      const oldSelect = state.get('select')\n      let pois\n      let msg\n      let count\n      if (poiList === MSG.Fail) {\n        pois = []\n        msg = MSG.Fail\n        count = 0\n      } else if (poiList === 'no_data') {\n        pois = []\n        msg = MSG.Null\n        count = -1\n      } else {\n        pois = poiList.pois\n        msg = ''\n        count = poiList.count\n      }\n      const select = oldSelect\n        .set('pois', fromJS(pois))\n        .set('msg', fromJS(msg))\n        .set('count', fromJS(count))\n      return state.set('select', select)\n    },\n  },\n  fromJS(initial),\n)\n"]},"metadata":{},"sourceType":"module"}