{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _handleActions;\n\nimport { CLEAR_TRADE_INFO_AFTER_SUBMITTED, FETCH_CHINA_UNICOM_USER_DATA, SAVE_TRADE_INFO_WHEN_UNMOUNT } from 'constant/index';\nimport { fromJS } from 'immutable';\nimport { handleActions } from 'redux-actions';\nvar initialForm = {\n  info: {\n    user_name: '',\n    user_idcard: '',\n    user_phone: '',\n    idcard_bare_img: '',\n    idcard_emblem_img: '',\n    idcard_human_img: '',\n    service_providers: 1,\n    editable: true,\n    agreed: false\n  }\n};\nvar form = handleActions((_handleActions = {}, _defineProperty(_handleActions, FETCH_CHINA_UNICOM_USER_DATA, function (state, _ref) {\n  var payload = _ref.payload;\n  var user_name = payload.user_name,\n      user_idcard = payload.user_idcard,\n      user_phone = payload.user_phone,\n      idcard_bare_img = payload.idcard_bare_img,\n      idcard_emblem_img = payload.idcard_emblem_img,\n      idcard_human_img = payload.idcard_human_img,\n      trade_no = payload.trade_no,\n      service_providers = payload.service_providers,\n      editable = payload.editable;\n  var info = state.get('info');\n  var newInfo;\n\n  if (editable) {\n    newInfo = info.set('trade_no', trade_no).set('service_providers', service_providers).set('agreed', false);\n  } else {\n    newInfo = info.set('user_name', user_name).set('user_idcard', user_idcard).set('user_phone', user_phone).set('idcard_bare_img', idcard_bare_img).set('idcard_emblem_img', idcard_emblem_img).set('idcard_human_img', idcard_human_img).set('trade_no', trade_no).set('service_providers', service_providers).set('editable', editable).set('agreed', true);\n  }\n\n  return state.set('info', newInfo);\n}), _defineProperty(_handleActions, SAVE_TRADE_INFO_WHEN_UNMOUNT, function (state, _ref2) {\n  var payload = _ref2.payload;\n  var info = state.get('info');\n  var user_name = payload.user_name,\n      user_phone = payload.user_phone,\n      user_idcard = payload.user_idcard,\n      idcard_human_img = payload.idcard_human_img,\n      idcard_emblem_img = payload.idcard_emblem_img,\n      idcard_bare_img = payload.idcard_bare_img,\n      agreed = payload.agreed;\n  var newInfo = info.set('user_name', user_name).set('user_phone', user_phone).set('user_idcard', user_idcard).set('idcard_human_img', idcard_human_img).set('idcard_emblem_img', idcard_emblem_img).set('idcard_bare_img', idcard_bare_img).set('agreed', agreed);\n  return state.set('info', newInfo);\n}), _defineProperty(_handleActions, CLEAR_TRADE_INFO_AFTER_SUBMITTED, function (state) {\n  return state.set('info', initialForm.info);\n}), _handleActions), fromJS(initialForm));\nexport default form;","map":{"version":3,"sources":["/Users/viser/mobile-next/src/reducers/trade/form.ts"],"names":["CLEAR_TRADE_INFO_AFTER_SUBMITTED","FETCH_CHINA_UNICOM_USER_DATA","SAVE_TRADE_INFO_WHEN_UNMOUNT","fromJS","handleActions","initialForm","info","user_name","user_idcard","user_phone","idcard_bare_img","idcard_emblem_img","idcard_human_img","service_providers","editable","agreed","form","state","payload","trade_no","get","newInfo","set"],"mappings":"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","sourcesContent":["import {\n  CLEAR_TRADE_INFO_AFTER_SUBMITTED,\n  FETCH_CHINA_UNICOM_USER_DATA,\n  SAVE_TRADE_INFO_WHEN_UNMOUNT,\n} from 'constant/index'\nimport { fromJS } from 'immutable'\nimport { UserDataReturns } from 'interfaces/trade'\nimport { handleActions } from 'redux-actions'\n\nconst initialForm = {\n  info: {\n    user_name: '',\n    user_idcard: '',\n    user_phone: '',\n    idcard_bare_img: '',\n    idcard_emblem_img: '',\n    idcard_human_img: '',\n    service_providers: 1,\n    editable: true,\n    agreed: false,\n  },\n}\n\nconst form = handleActions(\n  {\n    [FETCH_CHINA_UNICOM_USER_DATA](state, { payload }) {\n      const {\n        user_name,\n        user_idcard,\n        user_phone,\n        idcard_bare_img,\n        idcard_emblem_img,\n        idcard_human_img,\n        trade_no,\n        service_providers,\n        editable,\n      }: UserDataReturns = payload\n      const info = state.get('info')\n      let newInfo\n      if (editable) {\n        newInfo = info\n          .set('trade_no', trade_no)\n          .set('service_providers', service_providers)\n          .set('agreed', false)\n      } else {\n        newInfo = info\n          .set('user_name', user_name)\n          .set('user_idcard', user_idcard)\n          .set('user_phone', user_phone)\n          .set('idcard_bare_img', idcard_bare_img)\n          .set('idcard_emblem_img', idcard_emblem_img)\n          .set('idcard_human_img', idcard_human_img)\n          .set('trade_no', trade_no)\n          .set('service_providers', service_providers)\n          .set('editable', editable)\n          .set('agreed', true)\n      }\n      return state.set('info', newInfo)\n    },\n    [SAVE_TRADE_INFO_WHEN_UNMOUNT](state, { payload }) {\n      const info = state.get('info')\n      const {\n        user_name,\n        user_phone,\n        user_idcard,\n        idcard_human_img,\n        idcard_emblem_img,\n        idcard_bare_img,\n        agreed,\n      }: Partial<UserDataReturns> & { agreed: boolean } = payload\n      const newInfo = info\n        .set('user_name', user_name)\n        .set('user_phone', user_phone)\n        .set('user_idcard', user_idcard)\n        .set('idcard_human_img', idcard_human_img)\n        .set('idcard_emblem_img', idcard_emblem_img)\n        .set('idcard_bare_img', idcard_bare_img)\n        .set('agreed', agreed)\n      return state.set('info', newInfo)\n    },\n    [CLEAR_TRADE_INFO_AFTER_SUBMITTED](state) {\n      return state.set('info', initialForm.info)\n    },\n  },\n  fromJS(initialForm),\n)\n\nexport default form\n"]},"metadata":{},"sourceType":"module"}