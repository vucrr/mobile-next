{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport { isApp, isIOS } from 'utils/app';\nexport function trackClickEvent(properties) {\n  try {\n    if (isApp()) {\n      // app内嵌 H5由 app 发送 piwik\n      var piwikMsg = _JSON$stringify({\n        category: properties.category,\n        action: 'Clicked',\n        name: properties.label,\n        value: properties.value || 1\n      });\n\n      if (isIOS()) {\n        window.webkit.messageHandlers.sendWebPiwikEvent && window.webkit.messageHandlers.sendWebPiwikEvent.postMessage(piwikMsg);\n      } else {\n        window.jsObj.sendWebPiwikEvent && window.jsObj.sendWebPiwikEvent(piwikMsg);\n      }\n    } else {\n      _paq.push(['trackEvent', properties.category, 'Clicked', properties.label, properties.value || 1]);\n    }\n  } catch (e) {\n    if (!(e instanceof ReferenceError)) throw e;\n  }\n}","map":{"version":3,"sources":["/Users/viser/mobile-next/src/utils/piwik.ts"],"names":["isApp","isIOS","trackClickEvent","properties","piwikMsg","category","action","name","label","value","window","webkit","messageHandlers","sendWebPiwikEvent","postMessage","jsObj","_paq","push","e","ReferenceError"],"mappings":";AAAA,SAASA,KAAT,EAAgBC,KAAhB,QAA6B,WAA7B;AAQA,OAAO,SAASC,eAAT,CAAyBC,UAAzB,EAAgE;AACrE,MAAI;AACF,QAAIH,KAAK,EAAT,EAAa;AACX;AACA,UAAMI,QAAQ,GAAG,gBAAe;AAC9BC,QAAAA,QAAQ,EAAEF,UAAU,CAACE,QADS;AAE9BC,QAAAA,MAAM,EAAE,SAFsB;AAG9BC,QAAAA,IAAI,EAAEJ,UAAU,CAACK,KAHa;AAI9BC,QAAAA,KAAK,EAAEN,UAAU,CAACM,KAAX,IAAoB;AAJG,OAAf,CAAjB;;AAMA,UAAIR,KAAK,EAAT,EAAa;AACXS,QAAAA,MAAM,CAACC,MAAP,CAAcC,eAAd,CAA8BC,iBAA9B,IACEH,MAAM,CAACC,MAAP,CAAcC,eAAd,CAA8BC,iBAA9B,CAAgDC,WAAhD,CAA4DV,QAA5D,CADF;AAED,OAHD,MAGO;AACLM,QAAAA,MAAM,CAACK,KAAP,CAAaF,iBAAb,IAAkCH,MAAM,CAACK,KAAP,CAAaF,iBAAb,CAA+BT,QAA/B,CAAlC;AACD;AACF,KAdD,MAcO;AACLY,MAAAA,IAAI,CAACC,IAAL,CAAU,CAAC,YAAD,EAAed,UAAU,CAACE,QAA1B,EAAoC,SAApC,EAA+CF,UAAU,CAACK,KAA1D,EAAiEL,UAAU,CAACM,KAAX,IAAoB,CAArF,CAAV;AACD;AACF,GAlBD,CAkBE,OAAOS,CAAP,EAAU;AACV,QAAI,EAAEA,CAAC,YAAYC,cAAf,CAAJ,EAAoC,MAAMD,CAAN;AACrC;AACF","sourcesContent":["import { isApp, isIOS } from 'utils/app'\n\nexport interface TrackClickEventProperties {\n  category: string\n  label: string\n  value?: number\n}\n\nexport function trackClickEvent(properties: TrackClickEventProperties) {\n  try {\n    if (isApp()) {\n      // app内嵌 H5由 app 发送 piwik\n      const piwikMsg = JSON.stringify({\n        category: properties.category,\n        action: 'Clicked',\n        name: properties.label,\n        value: properties.value || 1,\n      })\n      if (isIOS()) {\n        window.webkit.messageHandlers.sendWebPiwikEvent &&\n          window.webkit.messageHandlers.sendWebPiwikEvent.postMessage(piwikMsg)\n      } else {\n        window.jsObj.sendWebPiwikEvent && window.jsObj.sendWebPiwikEvent(piwikMsg)\n      }\n    } else {\n      _paq.push(['trackEvent', properties.category, 'Clicked', properties.label, properties.value || 1])\n    }\n  } catch (e) {\n    if (!(e instanceof ReferenceError)) throw e\n  }\n}\n"]},"metadata":{},"sourceType":"module"}