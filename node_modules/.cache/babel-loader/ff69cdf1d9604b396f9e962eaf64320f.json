{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios';\nimport { baseURL } from \"./config\";\nimport cookies from \"./cookies\";\nexport function renderBgImage(url) {\n  return {\n    background: \"url('\".concat(url, \"') no-repeat center center\"),\n    backgroundSize: 'cover'\n  };\n}\nexport function scrollToAnchor(anchorName) {\n  var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (anchorName) {\n    var anchorElement = document.querySelector(anchorName);\n\n    if (anchorElement) {\n      animated ? anchorElement.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start'\n      }) : anchorElement.scrollIntoView();\n    }\n  }\n}\nexport function convertIndexToDigital(index) {\n  var pos = (index + 1).toString();\n  if (pos.length < 2) pos = '0' + pos;\n  return pos;\n}\nexport function ErrorLog(message) {\n  // tslint:disable-next-line\n  typeof window !== 'undefined' && console.error(message); // Error | string\n\n  axios({\n    method: 'post',\n    url: \"\".concat(baseURL, \"node-api/common/dingtalk/send\"),\n    data: {\n      // tslint:disable-next-line\n      isClient: typeof window !== 'undefined',\n      content: message.stack ? message.stack : message\n    }\n  });\n}\nexport function noop() {} // tslint:disable-line:no-empty\n\nexport function mockPending(delay) {\n  return new _Promise(function (resolve) {\n    return setTimeout(resolve, delay);\n  });\n} // 微信渠道没有channelID，此处暂时特殊处理\n\nexport function isWeixinNoCid(req) {\n  if (req.query && req.query.utm_source) {\n    return req.query.utm_source === 'weixin' && req.query.utm_medium === 'weixin_menu' && req.query.utm_campaign === 'firstpage';\n  }\n\n  return req.cookies.utm_source === 'weixin' && req.cookies.utm_medium === 'weixin_menu' && req.cookies.utm_campaign === 'firstpage';\n}\nexport function renderUtmParams(headers2) {\n  var sourcesKeys = {};\n\n  if (headers2.utmSource) {\n    sourcesKeys.utm_source = headers2.utmSource;\n  }\n\n  if (headers2.utmMedium) {\n    sourcesKeys.utm_medium = headers2.utmMedium;\n  }\n\n  if (headers2.utmCampaign) {\n    sourcesKeys.utm_campaign = headers2.utmCampaign;\n  }\n\n  var sourcesKey1 = _Object$keys(sourcesKeys).map(function (key) {\n    return \"\".concat(key, \"=\").concat(sourcesKeys[key]);\n  }).join('&');\n\n  return sourcesKey1.length ? \"&\".concat(sourcesKey1) : '';\n}\nvar easings = {\n  linear: function linear(t) {\n    return t;\n  },\n  easeInQuad: function easeInQuad(t) {\n    return t * t;\n  },\n  easeOutQuad: function easeOutQuad(t) {\n    return t * (2 - t);\n  },\n  easeInOutQuad: function easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  easeInCubic: function easeInCubic(t) {\n    return t * t * t;\n  },\n  easeOutCubic: function easeOutCubic(t) {\n    return --t * t * t + 1;\n  },\n  easeInOutCubic: function easeInOutCubic(t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  easeInQuart: function easeInQuart(t) {\n    return t * t * t * t;\n  },\n  easeOutQuart: function easeOutQuart(t) {\n    return 1 - --t * t * t * t;\n  },\n  easeInOutQuart: function easeInOutQuart(t) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n  easeInQuint: function easeInQuint(t) {\n    return t * t * t * t * t;\n  },\n  easeOutQuint: function easeOutQuint(t) {\n    return 1 + --t * t * t * t * t;\n  },\n  easeInOutQuint: function easeInOutQuint(t) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  }\n};\nexport function scrollWithAnimation(destination) {\n  var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n  var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'easeInQuad';\n  var callback = arguments.length > 3 ? arguments[3] : undefined;\n  var start = window.pageYOffset;\n  var startTime = 'now' in window.performance ? performance.now() : _Date$now();\n  var documentHeight = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n  var windowHeight = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight;\n  var destinationOffset = typeof destination === 'number' ? destination : destination.offsetTop;\n  var destinationOffsetToScroll = Math.round(documentHeight - destinationOffset < windowHeight ? documentHeight - windowHeight : destinationOffset);\n\n  if ('requestAnimationFrame' in window === false) {\n    window.scroll(0, destinationOffsetToScroll);\n    if (callback) callback();\n    return;\n  } else {\n    ;\n\n    (function scroll() {\n      var now = 'now' in window.performance ? performance.now() : new Date().getTime();\n      var time = Math.min(1, (now - startTime) / duration);\n      var timeFunc = easings[easing](time);\n      window.scroll(0, Math.ceil(timeFunc * (destinationOffsetToScroll - start) + start));\n\n      if (window.pageYOffset === destinationOffsetToScroll) {\n        if (callback) callback();\n        return;\n      }\n\n      requestAnimationFrame(scroll);\n    })();\n  }\n}\nexport var padLeft = function padLeft(n) {\n  return n < 10 ? \"0\".concat(n) : n;\n};\nexport function zipBase64(original) {\n  var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.7;\n  return new _Promise(function (resolve) {\n    var img = new Image();\n    img.src = original;\n\n    img.onload = function () {\n      var canvas = document.createElement('CANVAS');\n      var context = canvas.getContext('2d');\n      var width = img.width;\n      var height = img.height;\n      var rate = (width < height ? width / height : height / width) / 1.5;\n      canvas.width = width * rate;\n      canvas.height = height * rate;\n      context.translate(width * rate / 2, height * rate / 2);\n      context.drawImage(img, -width * rate / 2, -height * rate / 2, width * rate, height * rate);\n      var result = canvas.toDataURL('image/jpeg', quality);\n      resolve(result);\n    };\n  });\n}\nexport function formatPhone(phone) {\n  return phone && phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\n}\nexport function formatBankCard(phone) {\n  return phone && phone.replace(/(\\d{4})\\d{8}(\\d{4})/, '$1********$2');\n}\nexport function getDomain(hostname) {\n  if (hostname === 'm.xianghuanji.com') {\n    return '.xianghuanji.com';\n  }\n\n  return hostname;\n}\nexport var delayHandle = function delayHandle(tick) {\n  return new _Promise(function (resolve) {\n    if (tick > 0) {\n      setTimeout(function () {\n        return resolve();\n      }, tick * 1000);\n    } else {\n      resolve();\n    }\n  });\n};\nexport var renderLink = function renderLink(_ref) {\n  var item = _ref.item;\n  var links = {\n    product_info: {\n      pathname: '/product/detail',\n      query: {\n        id_activity: item.get('product_id')\n      }\n    },\n    product_category: \"/product/category?tag=\".concat(item.get('tag_id')),\n    activity: item.get('skip_url'),\n    expire_user: '/test',\n    // 到期用户\n    no_jump: 'javascript:void(0);'\n  };\n  return links[item.get('type')];\n};\nexport var cleanUserInfo = function cleanUserInfo() {\n  ErrorLog(\"\\u5408\\u5E76\\u8D26\\u53F7\\u5DF2\\u88AB\\u6E05\\u7406\\uFF1Auser_id_v2\\uFF1A\".concat(cookies.get('user_id_v2'), \" userToken: \").concat(cookies.get('userToken')));\n  var domain = getDomain(location.hostname);\n  cookies.remove('user_id_v2');\n  cookies.remove('userToken');\n  cookies.remove('user_id_v2', {\n    domain: domain\n  });\n  cookies.remove('userToken', {\n    domain: domain\n  });\n  location.href = \"/next-api/account/login?redirect=\".concat(encodeURIComponent('/'));\n};","map":{"version":3,"sources":["/Users/viser/mobile-next/src/utils/tools.ts"],"names":["axios","baseURL","cookies","renderBgImage","url","background","backgroundSize","scrollToAnchor","anchorName","animated","anchorElement","document","querySelector","scrollIntoView","behavior","block","convertIndexToDigital","index","pos","toString","length","ErrorLog","message","window","console","error","method","data","isClient","content","stack","noop","mockPending","delay","resolve","setTimeout","isWeixinNoCid","req","query","utm_source","utm_medium","utm_campaign","renderUtmParams","headers2","sourcesKeys","utmSource","utmMedium","utmCampaign","sourcesKey1","map","key","join","easings","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","scrollWithAnimation","destination","duration","easing","callback","start","pageYOffset","startTime","performance","now","documentHeight","Math","max","body","scrollHeight","offsetHeight","documentElement","clientHeight","windowHeight","innerHeight","getElementsByTagName","destinationOffset","offsetTop","destinationOffsetToScroll","round","scroll","Date","getTime","time","min","timeFunc","ceil","requestAnimationFrame","padLeft","n","zipBase64","original","quality","img","Image","src","onload","canvas","createElement","context","getContext","width","height","rate","translate","drawImage","result","toDataURL","formatPhone","phone","replace","formatBankCard","getDomain","hostname","delayHandle","tick","renderLink","item","links","product_info","pathname","id_activity","get","product_category","activity","expire_user","no_jump","cleanUserInfo","domain","location","remove","href","encodeURIComponent"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { baseURL } from 'utils/config'\nimport cookies from './cookies'\n\nexport function renderBgImage(url: string) {\n  return {\n    background: `url('${url}') no-repeat center center`,\n    backgroundSize: 'cover',\n  }\n}\n\nexport function scrollToAnchor(anchorName: string, animated = true) {\n  if (anchorName) {\n    const anchorElement = document.querySelector(anchorName)\n    if (anchorElement) {\n      animated ? anchorElement.scrollIntoView({ behavior: 'smooth', block: 'start' }) : anchorElement.scrollIntoView()\n    }\n  }\n}\n\nexport function convertIndexToDigital(index: number): string {\n  let pos = (index + 1).toString()\n  if (pos.length < 2) pos = '0' + pos\n  return pos\n}\n\nexport function ErrorLog(message: any) {\n  // tslint:disable-next-line\n  typeof window !== 'undefined' && console.error(message)\n  // Error | string\n  axios({\n    method: 'post',\n    url: `${baseURL}node-api/common/dingtalk/send`,\n    data: {\n      // tslint:disable-next-line\n      isClient: typeof window !== 'undefined',\n      content: message.stack ? message.stack : message,\n    },\n  })\n}\n\nexport function noop() {} // tslint:disable-line:no-empty\n\nexport function mockPending(delay: number) {\n  return new Promise(resolve => setTimeout(resolve, delay))\n}\n\n// 微信渠道没有channelID，此处暂时特殊处理\nexport function isWeixinNoCid(req: any) {\n  if (req.query && req.query.utm_source) {\n    return (\n      req.query.utm_source === 'weixin' &&\n      req.query.utm_medium === 'weixin_menu' &&\n      req.query.utm_campaign === 'firstpage'\n    )\n  }\n  return (\n    req.cookies.utm_source === 'weixin' &&\n    req.cookies.utm_medium === 'weixin_menu' &&\n    req.cookies.utm_campaign === 'firstpage'\n  )\n}\n\nexport function renderUtmParams(headers2: any) {\n  const sourcesKeys: any = {}\n  if (headers2.utmSource) {\n    sourcesKeys.utm_source = headers2.utmSource\n  }\n  if (headers2.utmMedium) {\n    sourcesKeys.utm_medium = headers2.utmMedium\n  }\n  if (headers2.utmCampaign) {\n    sourcesKeys.utm_campaign = headers2.utmCampaign\n  }\n  const sourcesKey1 = Object.keys(sourcesKeys)\n    .map(key => `${key}=${sourcesKeys[key]}`)\n    .join('&')\n  return sourcesKey1.length ? `&${sourcesKey1}` : ''\n}\n\nconst easings: { [index: string]: (t: number) => number } = {\n  linear(t: number) {\n    return t\n  },\n  easeInQuad(t: number) {\n    return t * t\n  },\n  easeOutQuad(t: number) {\n    return t * (2 - t)\n  },\n  easeInOutQuad(t: number) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t\n  },\n  easeInCubic(t: number) {\n    return t * t * t\n  },\n  easeOutCubic(t: number) {\n    return --t * t * t + 1\n  },\n  easeInOutCubic(t: number) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\n  },\n  easeInQuart(t: number) {\n    return t * t * t * t\n  },\n  easeOutQuart(t: number) {\n    return 1 - --t * t * t * t\n  },\n  easeInOutQuart(t: number) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t\n  },\n  easeInQuint(t: number) {\n    return t * t * t * t * t\n  },\n  easeOutQuint(t: number) {\n    return 1 + --t * t * t * t * t\n  },\n  easeInOutQuint(t: number) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t\n  },\n}\n\nexport function scrollWithAnimation(\n  destination: number | HTMLElement,\n  duration = 300,\n  easing = 'easeInQuad',\n  callback?: Function,\n) {\n  const start = window.pageYOffset\n  const startTime = 'now' in window.performance ? performance.now() : Date.now()\n\n  const documentHeight = Math.max(\n    document.body.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.clientHeight,\n    document.documentElement.scrollHeight,\n    document.documentElement.offsetHeight,\n  )\n  const windowHeight =\n    window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight\n\n  const destinationOffset = typeof destination === 'number' ? destination : destination.offsetTop\n  const destinationOffsetToScroll = Math.round(\n    documentHeight - destinationOffset < windowHeight ? documentHeight - windowHeight : destinationOffset,\n  )\n\n  if ('requestAnimationFrame' in window === false) {\n    window.scroll(0, destinationOffsetToScroll)\n    if (callback) callback()\n    return\n  } else {\n    ;(function scroll() {\n      const now = 'now' in window.performance ? performance.now() : new Date().getTime()\n      const time = Math.min(1, (now - startTime) / duration)\n      const timeFunc = easings[easing](time)\n      window.scroll(0, Math.ceil(timeFunc * (destinationOffsetToScroll - start) + start))\n\n      if (window.pageYOffset === destinationOffsetToScroll) {\n        if (callback) callback()\n        return\n      }\n      requestAnimationFrame(scroll)\n    })()\n  }\n}\n\nexport const padLeft = (n: number) => (n < 10 ? `0${n}` : n)\n\nexport function zipBase64(original: string, quality = 0.7): Promise<string> {\n  return new Promise(resolve => {\n    const img = new Image()\n    img.src = original\n    img.onload = function() {\n      const canvas = document.createElement('CANVAS') as HTMLCanvasElement\n      const context = canvas.getContext('2d')\n      const width = img.width\n      const height = img.height\n      const rate = (width < height ? width / height : height / width) / 1.5\n      canvas.width = width * rate\n      canvas.height = height * rate\n      context!.translate((width * rate) / 2, (height * rate) / 2)\n      context!.drawImage(img, (-width * rate) / 2, (-height * rate) / 2, width * rate, height * rate)\n      const result = canvas.toDataURL('image/jpeg', quality)\n      resolve(result)\n    }\n  })\n}\n\nexport function formatPhone(phone: string) {\n  return phone && phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n}\n\nexport function formatBankCard(phone: string) {\n  return phone && phone.replace(/(\\d{4})\\d{8}(\\d{4})/, '$1********$2')\n}\n\nexport function getDomain(hostname: string): string {\n  if (hostname === 'm.xianghuanji.com') {\n    return '.xianghuanji.com'\n  }\n  return hostname\n}\n\nexport const delayHandle = (tick: number) => {\n  return new Promise<void>(resolve => {\n    if (tick > 0) {\n      setTimeout(() => resolve(), tick * 1000)\n    } else {\n      resolve()\n    }\n  })\n}\n\nexport const renderLink = ({ item }: { item: any }) => {\n  const links: { [index: string]: string | object } = {\n    product_info: { pathname: '/product/detail', query: { id_activity: item.get('product_id') } },\n    product_category: `/product/category?tag=${item.get('tag_id')}`,\n    activity: item.get('skip_url'),\n    expire_user: '/test', // 到期用户\n    no_jump: 'javascript:void(0);',\n  }\n  return links[item.get('type')]\n}\n\nexport const cleanUserInfo = () => {\n  ErrorLog(`合并账号已被清理：user_id_v2：${cookies.get('user_id_v2')} userToken: ${cookies.get('userToken')}`)\n  const domain = getDomain(location.hostname)\n  cookies.remove('user_id_v2')\n  cookies.remove('userToken')\n  cookies.remove('user_id_v2', { domain })\n  cookies.remove('userToken', { domain })\n  location.href = `/next-api/account/login?redirect=${encodeURIComponent('/')}`\n}\n"]},"metadata":{},"sourceType":"module"}