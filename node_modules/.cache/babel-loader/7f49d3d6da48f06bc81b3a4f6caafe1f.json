{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport classnames from 'classnames';\nimport { LazyImage, Link } from 'components';\nimport { TrackEventHome } from 'configs/trackEventLabels';\nimport dayjs from 'dayjs';\nimport React from 'react';\nimport { convertIndexToDigital, renderLink } from 'utils/tools';\nimport styles from \"./Coupons.less\";\n\nvar ImageDayLeft = function ImageDayLeft(_ref) {\n  var ext = _ref.ext;\n  var now = dayjs();\n  var leftDate = dayjs.unix(ext.get('expire_datetime'));\n  var day = leftDate.diff(now, 'day');\n  var hour = leftDate.diff(now, 'hour') - day * 24;\n  var showHour = day < 7;\n  return React.createElement(_Flex, {\n    direction: \"column\",\n    justify: \"center\",\n    align: \"center\",\n    className: classnames(styles.bg_date, showHour && styles.hour)\n  }, React.createElement(\"p\", null, day > 0 ? \"\".concat(day).padStart(2, '0') : '00', React.createElement(\"span\", null, \"\\u5929\")), showHour && React.createElement(\"p\", null, hour > 0 ? \"\".concat(hour).padStart(2, '0') : '00', React.createElement(\"span\", null, \"\\u65F6\")));\n};\n\nvar Coupons =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Coupons, _React$Component);\n\n  function Coupons() {\n    _classCallCheck(this, Coupons);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Coupons).apply(this, arguments));\n  }\n\n  _createClass(Coupons, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var fetchList = this.props.fetchList;\n      fetchList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var info = this.props.info;\n      var title = info.get('model_title');\n      var list = info.get('model_data');\n\n      if (!title || list.size !== 2) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        className: styles.container\n      }, React.createElement(\"h1\", null, title), React.createElement(_Flex, {\n        className: styles.wrapper,\n        justify: \"between\"\n      }, list.map(function (item, key) {\n        var isTag = item.get('user_tag') === 'expire_user';\n        var trackEventleft = {\n          label: \"\".concat(TrackEventHome.NewOldUser.NewOldBannerLeft + convertIndexToDigital(key), \"\\t\").concat(item.get('image'), \"\\t\").concat(item.get('user_tag')),\n          category: TrackEventHome.Category\n        };\n        var trackEventright = {\n          label: \"\".concat(TrackEventHome.NewOldUser.NewOldBannerRight + convertIndexToDigital(key), \"\\t\").concat(item.get('image'), \"\\t\").concat(item.get('user_tag')),\n          category: TrackEventHome.Category\n        };\n        return React.createElement(Link, {\n          to: renderLink({\n            item: item\n          }),\n          key: key,\n          className: styles.coupon,\n          trackEvent: key === 0 ? trackEventleft : trackEventright\n        }, React.createElement(LazyImage, {\n          className: styles.thumb,\n          src: item.get('image')\n        }), isTag && key === 0 && React.createElement(ImageDayLeft, {\n          ext: item.get('ext')\n        }), isTag && key === 1 && React.createElement(\"span\", {\n          className: styles.right_text,\n          style: {\n            color: \"#\".concat(item.getIn(['ext', 'font_color']))\n          }\n        }, item.getIn(['ext', 'expire_title'])));\n      })));\n    }\n  }]);\n\n  return Coupons;\n}(React.Component);\n\nexport default Coupons;","map":{"version":3,"sources":["/Users/viser/mobile-next/src/containers/Home/Coupons.tsx"],"names":["classnames","LazyImage","Link","TrackEventHome","dayjs","React","convertIndexToDigital","renderLink","styles","ImageDayLeft","ext","now","leftDate","unix","get","day","diff","hour","showHour","bg_date","padStart","Coupons","fetchList","props","info","title","list","size","container","wrapper","map","item","key","isTag","trackEventleft","label","NewOldUser","NewOldBannerLeft","category","Category","trackEventright","NewOldBannerRight","coupon","thumb","right_text","color","getIn","Component"],"mappings":";;;;;;AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,SAAT,EAAoBC,IAApB,QAAgC,YAAhC;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,qBAAT,EAAgCC,UAAhC,QAAkD,aAAlD;AACA,OAAOC,MAAP;;AAMA,IAAMC,YAAwD,GAAG,SAA3DA,YAA2D,OAAa;AAAA,MAAVC,GAAU,QAAVA,GAAU;AAC5E,MAAMC,GAAG,GAAGP,KAAK,EAAjB;AACA,MAAMQ,QAAQ,GAAGR,KAAK,CAACS,IAAN,CAAWH,GAAG,CAACI,GAAJ,CAAQ,iBAAR,CAAX,CAAjB;AACA,MAAMC,GAAG,GAAGH,QAAQ,CAACI,IAAT,CAAcL,GAAd,EAAmB,KAAnB,CAAZ;AACA,MAAMM,IAAI,GAAGL,QAAQ,CAACI,IAAT,CAAcL,GAAd,EAAmB,MAAnB,IAA6BI,GAAG,GAAG,EAAhD;AACA,MAAMG,QAAQ,GAAGH,GAAG,GAAG,CAAvB;AACA,SACE;AACE,IAAA,SAAS,EAAC,QADZ;AAEE,IAAA,OAAO,EAAC,QAFV;AAGE,IAAA,KAAK,EAAC,QAHR;AAIE,IAAA,SAAS,EAAEf,UAAU,CAACQ,MAAM,CAACW,OAAR,EAAiBD,QAAQ,IAAIV,MAAM,CAACS,IAApC;AAJvB,KAME,+BACGF,GAAG,GAAG,CAAN,GAAU,UAAGA,GAAH,EAASK,QAAT,CAAkB,CAAlB,EAAqB,GAArB,CAAV,GAAsC,IADzC,EAEE,2CAFF,CANF,EAUGF,QAAQ,IACP,+BACGD,IAAI,GAAG,CAAP,GAAW,UAAGA,IAAH,EAAUG,QAAV,CAAmB,CAAnB,EAAsB,GAAtB,CAAX,GAAwC,IAD3C,EAEE,2CAFF,CAXJ,CADF;AAmBD,CAzBD;;IAkCMC,O;;;;;;;;;;;;;wCACgB;AAAA,UACVC,SADU,GACI,KAAKC,KADT,CACVD,SADU;AAElBA,MAAAA,SAAS;AACV;;;6BAEQ;AAAA,UACCE,IADD,GACU,KAAKD,KADf,CACCC,IADD;AAEP,UAAMC,KAAK,GAAGD,IAAI,CAACV,GAAL,CAAS,aAAT,CAAd;AACA,UAAMY,IAAI,GAAGF,IAAI,CAACV,GAAL,CAAS,YAAT,CAAb;;AACA,UAAI,CAACW,KAAD,IAAUC,IAAI,CAACC,IAAL,KAAc,CAA5B,EAA+B;AAC7B,eAAO,IAAP;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAEnB,MAAM,CAACoB;AAAvB,SACE,gCAAKH,KAAL,CADF,EAEE;AAAM,QAAA,SAAS,EAAEjB,MAAM,CAACqB,OAAxB;AAAiC,QAAA,OAAO,EAAC;AAAzC,SACGH,IAAI,CAACI,GAAL,CAAS,UAACC,IAAD,EAAYC,GAAZ,EAA4B;AACpC,YAAMC,KAAK,GAAGF,IAAI,CAACjB,GAAL,CAAS,UAAT,MAAyB,aAAvC;AACA,YAAMoB,cAAc,GAAG;AACrBC,UAAAA,KAAK,YAAKhC,cAAc,CAACiC,UAAf,CAA0BC,gBAA1B,GAA6C/B,qBAAqB,CAAC0B,GAAD,CAAvE,eAAiFD,IAAI,CAACjB,GAAL,CACpF,OADoF,CAAjF,eAECiB,IAAI,CAACjB,GAAL,CAAS,UAAT,CAFD,CADgB;AAIrBwB,UAAAA,QAAQ,EAAEnC,cAAc,CAACoC;AAJJ,SAAvB;AAMA,YAAMC,eAAe,GAAG;AACtBL,UAAAA,KAAK,YAAKhC,cAAc,CAACiC,UAAf,CAA0BK,iBAA1B,GAA8CnC,qBAAqB,CAAC0B,GAAD,CAAxE,eAAkFD,IAAI,CAACjB,GAAL,CACrF,OADqF,CAAlF,eAECiB,IAAI,CAACjB,GAAL,CAAS,UAAT,CAFD,CADiB;AAItBwB,UAAAA,QAAQ,EAAEnC,cAAc,CAACoC;AAJH,SAAxB;AAOA,eACE,oBAAC,IAAD;AACE,UAAA,EAAE,EAAEhC,UAAU,CAAC;AAAEwB,YAAAA,IAAI,EAAJA;AAAF,WAAD,CADhB;AAEE,UAAA,GAAG,EAAEC,GAFP;AAGE,UAAA,SAAS,EAAExB,MAAM,CAACkC,MAHpB;AAIE,UAAA,UAAU,EAAEV,GAAG,KAAK,CAAR,GAAYE,cAAZ,GAA6BM;AAJ3C,WAME,oBAAC,SAAD;AAAW,UAAA,SAAS,EAAEhC,MAAM,CAACmC,KAA7B;AAAoC,UAAA,GAAG,EAAEZ,IAAI,CAACjB,GAAL,CAAS,OAAT;AAAzC,UANF,EAOGmB,KAAK,IAAID,GAAG,KAAK,CAAjB,IAAsB,oBAAC,YAAD;AAAc,UAAA,GAAG,EAAED,IAAI,CAACjB,GAAL,CAAS,KAAT;AAAnB,UAPzB,EAQGmB,KAAK,IACJD,GAAG,KAAK,CADT,IAEG;AAAM,UAAA,SAAS,EAAExB,MAAM,CAACoC,UAAxB;AAAoC,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,aAAMd,IAAI,CAACe,KAAL,CAAW,CAAC,KAAD,EAAQ,YAAR,CAAX,CAAN;AAAP;AAA3C,WACGf,IAAI,CAACe,KAAL,CAAW,CAAC,KAAD,EAAQ,cAAR,CAAX,CADH,CAVN,CADF;AAiBD,OAhCA,CADH,CAFF,CADF;AAwCD;;;;EArDmBzC,KAAK,CAAC0C,S;;AAwD5B,eAAe1B,OAAf","sourcesContent":["import { Flex } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { LazyImage, Link } from 'components'\nimport { TrackEventHome } from 'configs/trackEventLabels'\nimport dayjs from 'dayjs'\nimport React from 'react'\nimport { convertIndexToDigital, renderLink } from 'utils/tools'\nimport styles from './Coupons.less'\n\nexport interface ImageDayLeftProps {\n  ext: any\n}\n\nconst ImageDayLeft: React.FunctionComponent<ImageDayLeftProps> = ({ ext }) => {\n  const now = dayjs()\n  const leftDate = dayjs.unix(ext.get('expire_datetime'))\n  const day = leftDate.diff(now, 'day')\n  const hour = leftDate.diff(now, 'hour') - day * 24\n  const showHour = day < 7\n  return (\n    <Flex\n      direction=\"column\"\n      justify=\"center\"\n      align=\"center\"\n      className={classnames(styles.bg_date, showHour && styles.hour)}\n    >\n      <p>\n        {day > 0 ? `${day}`.padStart(2, '0') : '00'}\n        <span>天</span>\n      </p>\n      {showHour && (\n        <p>\n          {hour > 0 ? `${hour}`.padStart(2, '0') : '00'}\n          <span>时</span>\n        </p>\n      )}\n    </Flex>\n  )\n}\n\nexport interface CouponsProps {\n  info: any\n  fetchList: any\n}\n\nexport interface CouponsState {}\n\nclass Coupons extends React.Component<CouponsProps, CouponsState> {\n  componentDidMount() {\n    const { fetchList } = this.props\n    fetchList()\n  }\n\n  render() {\n    const { info } = this.props\n    const title = info.get('model_title')\n    const list = info.get('model_data')\n    if (!title || list.size !== 2) {\n      return null\n    }\n    return (\n      <div className={styles.container}>\n        <h1>{title}</h1>\n        <Flex className={styles.wrapper} justify=\"between\">\n          {list.map((item: any, key: number) => {\n            const isTag = item.get('user_tag') === 'expire_user'\n            const trackEventleft = {\n              label: `${TrackEventHome.NewOldUser.NewOldBannerLeft + convertIndexToDigital(key)}\\t${item.get(\n                'image',\n              )}\\t${item.get('user_tag')}`,\n              category: TrackEventHome.Category,\n            }\n            const trackEventright = {\n              label: `${TrackEventHome.NewOldUser.NewOldBannerRight + convertIndexToDigital(key)}\\t${item.get(\n                'image',\n              )}\\t${item.get('user_tag')}`,\n              category: TrackEventHome.Category,\n            }\n\n            return (\n              <Link\n                to={renderLink({ item })}\n                key={key}\n                className={styles.coupon}\n                trackEvent={key === 0 ? trackEventleft : trackEventright}\n              >\n                <LazyImage className={styles.thumb} src={item.get('image')} />\n                {isTag && key === 0 && <ImageDayLeft ext={item.get('ext')} />}\n                {isTag &&\n                  key === 1 && (\n                    <span className={styles.right_text} style={{ color: `#${item.getIn(['ext', 'font_color'])}` }}>\n                      {item.getIn(['ext', 'expire_title'])}\n                    </span>\n                  )}\n              </Link>\n            )\n          })}\n        </Flex>\n      </div>\n    )\n  }\n}\n\nexport default Coupons\n"]},"metadata":{},"sourceType":"module"}