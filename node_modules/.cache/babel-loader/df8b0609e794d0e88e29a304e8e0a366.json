{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport { LazyImage, Swiper } from 'components';\nimport { TrackEventHome } from 'configs/trackEventLabels';\nimport Router from 'next/router';\nimport React from 'react';\nimport { trackClickEvent } from 'utils/piwik';\nimport { noop } from 'utils/tools';\nimport styles from \"./RecommendSwiper.less\";\nvar Item = _Flex.Item;\n\nvar RecommendSwiper =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RecommendSwiper, _React$Component);\n\n  function RecommendSwiper() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RecommendSwiper);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RecommendSwiper)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      page: 1\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (cur) {\n      _this.setState({\n        page: cur + 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (item) {\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  trackClickEvent({\n                    category: TrackEventHome.Category,\n                    label: \"\".concat(TrackEventHome.BrandIcon.BrandIcon, \"\\t\").concat(item.get('product_id'))\n                  });\n                  _context.next = 3;\n                  return Router.push(\"/product/detail?id_activity=\".concat(item.get('product_id')));\n\n                case 3:\n                  window.scrollTo(0, 0);\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))\n      );\n    });\n\n    return _this;\n  }\n\n  _createClass(RecommendSwiper, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          title = _this$props.title,\n          list = _this$props.list;\n\n      if (!list) {\n        return null;\n      }\n\n      var swiperProps = {\n        className: styles.swiper,\n        dots: false,\n        autoplay: false,\n        // slidesPerView: 1.03,\n        spaceBetween: 6,\n        afterChange: this.handleChange,\n        on: {\n          slideChange: noop\n        }\n      };\n      return React.createElement(\"div\", {\n        className: styles.container\n      }, React.createElement(_Flex, {\n        className: styles.title_box,\n        justify: \"between\"\n      }, React.createElement(\"h1\", null, title), React.createElement(\"p\", null, React.createElement(\"span\", null, this.state.page), \" /\", list.size)), React.createElement(Swiper, swiperProps, list.map(function (item, key) {\n        return React.createElement(_Flex, {\n          className: styles.item,\n          key: key,\n          onClick: _this2.handleClick(item)\n        }, React.createElement(_Flex, {\n          className: styles.thumb,\n          justify: \"center\"\n        }, React.createElement(LazyImage, {\n          key: key,\n          src: item.get('image')\n        }), item.get('tag') && React.createElement(\"p\", null, item.get('tag'))), React.createElement(Item, {\n          className: styles.right\n        }, React.createElement(\"h4\", null, item.get('name')), React.createElement(_Flex, {\n          className: styles.price,\n          align: \"end\"\n        }, React.createElement(\"span\", {\n          className: styles.union\n        }, \"\\uFFE5\"), React.createElement(\"span\", {\n          className: styles.cur_price\n        }, item.get('price')), React.createElement(\"span\", {\n          className: styles.per\n        }, item.get('price_unit')), item.get('base_fee') > item.get('price') && React.createElement(\"span\", {\n          className: styles.line\n        }, \"\\xA5\", item.get('base_fee'), item.get('price_unit'))), React.createElement(\"div\", {\n          className: styles.extra_box\n        }, React.createElement(_Flex, {\n          className: styles.left,\n          justify: \"center\"\n        }, \"\\u7701\"), React.createElement(\"div\", {\n          className: styles.right\n        }, item.get('assurance') && React.createElement(\"p\", null, item.get('assurance')), item.get('assurance_divide') && React.createElement(\"p\", null, item.get('assurance_divide'))))));\n      })));\n    }\n  }]);\n\n  return RecommendSwiper;\n}(React.Component);\n\nexport default RecommendSwiper;","map":{"version":3,"sources":["/Users/viser/mobile-next/src/containers/Home/RecommendSwiper.tsx"],"names":["LazyImage","Swiper","TrackEventHome","Router","React","trackClickEvent","noop","styles","Item","RecommendSwiper","page","cur","setState","item","category","Category","label","BrandIcon","get","push","window","scrollTo","props","title","list","swiperProps","className","swiper","dots","autoplay","spaceBetween","afterChange","handleChange","on","slideChange","container","title_box","state","size","map","key","handleClick","thumb","right","price","union","cur_price","per","line","extra_box","left","Component"],"mappings":"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","sourcesContent":["import { Flex } from 'antd-mobile'\nimport { LazyImage, Swiper } from 'components'\nimport { TrackEventHome } from 'configs/trackEventLabels'\nimport Router from 'next/router'\nimport React from 'react'\nimport { trackClickEvent } from 'utils/piwik'\nimport { noop } from 'utils/tools'\nimport styles from './RecommendSwiper.less'\n\nconst Item = Flex.Item\n\nexport interface RecommendSwiperProps {\n  title: string\n  list: any\n}\n\nexport interface RecommendSwiperState {\n  page: number\n}\n\nclass RecommendSwiper extends React.Component<RecommendSwiperProps, RecommendSwiperState> {\n  readonly state: Readonly<RecommendSwiperState> = {\n    page: 1,\n  }\n\n  handleChange = (cur: number) => {\n    this.setState({\n      page: cur + 1,\n    })\n  }\n\n  handleClick = (item: any) => async () => {\n    trackClickEvent({\n      category: TrackEventHome.Category,\n      label: `${TrackEventHome.BrandIcon.BrandIcon}\\t${item.get('product_id')}`,\n    })\n    await Router.push(`/product/detail?id_activity=${item.get('product_id')}`)\n    window.scrollTo(0, 0)\n  }\n\n  render() {\n    const { title, list } = this.props\n\n    if (!list) {\n      return null\n    }\n\n    const swiperProps = {\n      className: styles.swiper,\n      dots: false,\n      autoplay: false,\n      // slidesPerView: 1.03,\n      spaceBetween: 6,\n      afterChange: this.handleChange,\n      on: {\n        slideChange: noop,\n      },\n    }\n\n    return (\n      <div className={styles.container}>\n        <Flex className={styles.title_box} justify=\"between\">\n          <h1>{title}</h1>\n          <p>\n            <span>{this.state.page}</span> /{list.size}\n          </p>\n        </Flex>\n        <Swiper {...swiperProps}>\n          {list.map((item: any, key: number) => (\n            <Flex className={styles.item} key={key} onClick={this.handleClick(item)}>\n              <Flex className={styles.thumb} justify=\"center\">\n                <LazyImage key={key} src={item.get('image')} />\n                {item.get('tag') && <p>{item.get('tag')}</p>}\n              </Flex>\n              <Item className={styles.right}>\n                <h4>{item.get('name')}</h4>\n                <Flex className={styles.price} align=\"end\">\n                  <span className={styles.union}>￥</span>\n                  <span className={styles.cur_price}>{item.get('price')}</span>\n                  <span className={styles.per}>{item.get('price_unit')}</span>\n                  {item.get('base_fee') > item.get('price') && (\n                    <span className={styles.line}>\n                      ¥{item.get('base_fee')}\n                      {item.get('price_unit')}\n                    </span>\n                  )}\n                </Flex>\n                <div className={styles.extra_box}>\n                  <Flex className={styles.left} justify=\"center\">\n                    省\n                  </Flex>\n                  <div className={styles.right}>\n                    {item.get('assurance') && <p>{item.get('assurance')}</p>}\n                    {item.get('assurance_divide') && <p>{item.get('assurance_divide')}</p>}\n                  </div>\n                </div>\n              </Item>\n            </Flex>\n          ))}\n        </Swiper>\n      </div>\n    )\n  }\n}\n\nexport default RecommendSwiper\n"]},"metadata":{},"sourceType":"module"}