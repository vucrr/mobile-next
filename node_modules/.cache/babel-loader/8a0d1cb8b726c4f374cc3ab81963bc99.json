{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport { buttonOptions } from 'actions/myAccount/service/list';\nimport { Button, Icon, LazyImage } from 'components';\nimport { TrackEventMyCenter } from 'configs/trackEventLabels';\nimport Router from 'next/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { trackClickEvent } from 'utils/piwik';\nimport styles from \"./ServiceItem.less\";\nimport Tips from \"./Tips\";\nvar Item = _Flex.Item;\nvar dicColor = {\n  1: styles.blue,\n  2: styles.red,\n  3: styles.gray\n};\n\nvar TopItem = function TopItem(_ref) {\n  var info = _ref.info,\n      btnList = _ref.btnList,\n      buttonOptions = _ref.buttonOptions;\n\n  var linkTo =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(contractNo) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              trackClickEvent(TrackEventMyCenter.Commodity);\n              _context.next = 3;\n              return Router.push(\"/myaccount/service/detail?contract_no=\".concat(contractNo));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function linkTo(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClick = function handleClick(btnItem) {\n    buttonOptions({\n      contractNo: info.contract_no,\n      returnflowTradeNo: info.returnflow_trade_no,\n      // 申请还机单号\n      returnflowSubTradeNo: info.returnflow_sub_trade_no,\n      // 还机单号\n      returnDetailType: info.returnflow_type,\n      contractStatus: info.contract_status,\n      tradeNo: info.trade_no,\n      buttonType: btnItem.button_type,\n      buttonLink: btnItem.button_link,\n      isSmallApp: info.is_ali_small,\n      payNo: info.pay_no,\n      pisCode: info.pis_code\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: styles.top\n  }, React.createElement(_Flex, {\n    className: styles.info,\n    onClick: function onClick() {\n      return linkTo(info.contract_no);\n    }\n  }, React.createElement(\"div\", {\n    className: styles.thumb\n  }, React.createElement(LazyImage, {\n    src: info.sku_info.sku_img_url\n  }), React.createElement(\"span\", {\n    className: dicColor[info.color_type]\n  }, info.show_text)), React.createElement(Item, null, React.createElement(\"h4\", null, info.sku_info.sku_name), React.createElement(\"span\", null, info.next_pay_date), React.createElement(\"br\", null), React.createElement(\"span\", null, info.repayment_amount))), !!btnList.length && React.createElement(\"div\", {\n    className: styles.btn_box\n  }, btnList.map(function (item, key) {\n    return React.createElement(Button, {\n      key: key,\n      type: key === btnList.length - 1 && item.button_tip.length > 0 ? 'ghost' : undefined,\n      className: styles.btn,\n      size: \"small\",\n      inline: true,\n      onClick: function onClick() {\n        handleClick(item);\n      }\n    }, item.button_name, key === btnList.length - 1 && item.button_tip.length > 0 ? React.createElement(Tips, {\n      info: item.button_tip\n    }) : '');\n  })), !!info.logistics_tip && React.createElement(\"div\", {\n    className: styles.content_box\n  }, React.createElement(_Flex, {\n    className: styles.tips,\n    justify: \"between\",\n    align: \"center\"\n  }, info.logistics_tip, \" \", React.createElement(Icon, {\n    type: \"cross\"\n  }))));\n};\n\nvar Bottom = function Bottom(_ref3) {\n  var list = _ref3.list,\n      contractNo = _ref3.contractNo;\n\n  var linkTo =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(link, trackEvent) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (trackEvent) trackClickEvent(trackEvent);\n              _context2.next = 3;\n              return Router.push(link);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function linkTo(_x2, _x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: styles.bottom\n  }, React.createElement(_Flex, {\n    className: styles.title_box,\n    align: \"center\",\n    onClick: function onClick() {\n      return linkTo(\"/myaccount/service/privilege?contract_no=\".concat(contractNo), TrackEventMyCenter.ViewAllRights);\n    }\n  }, React.createElement(Item, null, \"\\u4E13\\u5C5E\\u6743\\u76CA\"), React.createElement(Icon, {\n    type: \"right\",\n    color: \"#ccc\"\n  })), React.createElement(_Flex, {\n    className: styles.grid\n  }, list.map(function (item, key) {\n    return React.createElement(Item, {\n      className: styles.grid_item,\n      key: key,\n      onClick: function onClick() {\n        return linkTo(\"/myaccount/service/privilege?contract_no=\".concat(contractNo, \"&page=\").concat(key), _objectSpread({}, TrackEventMyCenter.Right, {\n          label: item.title\n        }));\n      }\n    }, React.createElement(LazyImage, {\n      src: item.icon\n    }), React.createElement(\"span\", null, item.title));\n  })));\n};\n\nvar ServiceItem = function ServiceItem(_ref5) {\n  var item = _ref5.item,\n      buttonOptions = _ref5.buttonOptions;\n\n  var equity = item.equity,\n      button_group = item.button_group,\n      topInfo = _objectWithoutProperties(item, [\"equity\", \"button_group\"]);\n\n  return React.createElement(React.Fragment, null, React.createElement(TopItem, {\n    info: topInfo,\n    btnList: button_group,\n    buttonOptions: buttonOptions\n  }), !!equity.list.length && React.createElement(Bottom, {\n    list: equity.list,\n    contractNo: topInfo.contract_no\n  }));\n};\n\nexport default connect(null, {\n  buttonOptions: buttonOptions\n})(ServiceItem);","map":{"version":3,"sources":["/Users/viser/mobile-next/src/containers/MyAccount/Center/ServiceBox/ServiceItem.tsx"],"names":["buttonOptions","Button","Icon","LazyImage","TrackEventMyCenter","Router","React","connect","trackClickEvent","styles","Tips","Item","dicColor","blue","red","gray","TopItem","info","btnList","linkTo","contractNo","Commodity","push","handleClick","btnItem","contract_no","returnflowTradeNo","returnflow_trade_no","returnflowSubTradeNo","returnflow_sub_trade_no","returnDetailType","returnflow_type","contractStatus","contract_status","tradeNo","trade_no","buttonType","button_type","buttonLink","button_link","isSmallApp","is_ali_small","payNo","pay_no","pisCode","pis_code","top","thumb","sku_info","sku_img_url","color_type","show_text","sku_name","next_pay_date","repayment_amount","length","btn_box","map","item","key","button_tip","undefined","btn","button_name","logistics_tip","content_box","tips","Bottom","list","link","trackEvent","bottom","title_box","ViewAllRights","grid","grid_item","Right","label","title","icon","ServiceItem","equity","button_group","topInfo"],"mappings":"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","sourcesContent":["import { ButtonOptionsProps, buttonOptions } from 'actions/myAccount/service/list'\nimport { Flex } from 'antd-mobile'\nimport { Button, Icon, LazyImage } from 'components'\nimport { TrackEventMyCenter } from 'configs/trackEventLabels'\nimport { ButtonGroup, Contract, EquityItem } from 'interfaces/account/center'\nimport Router from 'next/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { TrackClickEventProperties, trackClickEvent } from 'utils/piwik'\nimport styles from './ServiceItem.less'\nimport Tips from './Tips'\n\nconst Item = Flex.Item\n\nconst dicColor: { [index: number]: string } = {\n  1: styles.blue,\n  2: styles.red,\n  3: styles.gray,\n}\n\nexport interface TopItemProps {\n  info: Omit<Contract, 'equity' | 'button_group'>\n  btnList: ButtonGroup[]\n  buttonOptions: (params: ButtonOptionsProps) => void\n}\n\nconst TopItem: React.FunctionComponent<TopItemProps> = ({ info, btnList, buttonOptions }) => {\n  const linkTo = async (contractNo: string) => {\n    trackClickEvent(TrackEventMyCenter.Commodity)\n    await Router.push(`/myaccount/service/detail?contract_no=${contractNo}`)\n  }\n\n  const handleClick = (btnItem: ButtonGroup) => {\n    buttonOptions({\n      contractNo: info.contract_no,\n      returnflowTradeNo: info.returnflow_trade_no, // 申请还机单号\n      returnflowSubTradeNo: info.returnflow_sub_trade_no, // 还机单号\n      returnDetailType: info.returnflow_type,\n      contractStatus: info.contract_status,\n      tradeNo: info.trade_no,\n      buttonType: btnItem.button_type,\n      buttonLink: btnItem.button_link,\n      isSmallApp: info.is_ali_small,\n      payNo: info.pay_no,\n      pisCode: info.pis_code,\n    })\n  }\n  return (\n    <div className={styles.top}>\n      <Flex className={styles.info} onClick={() => linkTo(info.contract_no)}>\n        <div className={styles.thumb}>\n          <LazyImage src={info.sku_info.sku_img_url} />\n          <span className={dicColor[info.color_type]}>{info.show_text}</span>\n        </div>\n        <Item>\n          <h4>{info.sku_info.sku_name}</h4>\n          <span>{info.next_pay_date}</span>\n          <br />\n          <span>{info.repayment_amount}</span>\n        </Item>\n      </Flex>\n      {!!btnList.length && (\n        <div className={styles.btn_box}>\n          {btnList.map((item, key) => (\n            <Button\n              key={key}\n              type={key === btnList.length - 1 && item.button_tip.length > 0 ? 'ghost' : undefined}\n              className={styles.btn}\n              size=\"small\"\n              inline={true}\n              onClick={() => {\n                handleClick(item)\n              }}\n            >\n              {item.button_name}\n              {key === btnList.length - 1 && item.button_tip.length > 0 ? <Tips info={item.button_tip} /> : ''}\n            </Button>\n          ))}\n        </div>\n      )}\n      {!!info.logistics_tip && (\n        <div className={styles.content_box}>\n          <Flex className={styles.tips} justify=\"between\" align=\"center\">\n            {info.logistics_tip} <Icon type=\"cross\" />\n          </Flex>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport interface BottomProps {\n  list: Contract['equity']['list']\n  contractNo: string\n}\n\nconst Bottom: React.FunctionComponent<BottomProps> = ({ list, contractNo }) => {\n  const linkTo = async (link: string, trackEvent?: TrackClickEventProperties) => {\n    if (trackEvent) trackClickEvent(trackEvent)\n    await Router.push(link)\n  }\n  return (\n    <div className={styles.bottom}>\n      <Flex\n        className={styles.title_box}\n        align=\"center\"\n        onClick={() =>\n          linkTo(`/myaccount/service/privilege?contract_no=${contractNo}`, TrackEventMyCenter.ViewAllRights)\n        }\n      >\n        <Item>专属权益</Item>\n        <Icon type=\"right\" color=\"#ccc\" />\n      </Flex>\n      <Flex className={styles.grid}>\n        {list.map((item: EquityItem, key: number) => (\n          <Item\n            className={styles.grid_item}\n            key={key}\n            onClick={() =>\n              linkTo(`/myaccount/service/privilege?contract_no=${contractNo}&page=${key}`, {\n                ...TrackEventMyCenter.Right,\n                label: item.title,\n              })\n            }\n          >\n            <LazyImage src={item.icon} />\n            <span>{item.title}</span>\n          </Item>\n        ))}\n      </Flex>\n    </div>\n  )\n}\n\nexport interface ServiceItemProps {\n  item: Contract\n  buttonOptions: (params: ButtonOptionsProps) => void\n}\n\nconst ServiceItem: React.FunctionComponent<ServiceItemProps> = ({ item, buttonOptions }) => {\n  const { equity, button_group, ...topInfo } = item\n  return (\n    <>\n      <TopItem info={topInfo} btnList={button_group} buttonOptions={buttonOptions} />\n      {!!equity.list.length && <Bottom list={equity.list} contractNo={topInfo.contract_no} />}\n    </>\n  )\n}\n\nexport default connect(\n  null,\n  { buttonOptions },\n)(ServiceItem)\n"]},"metadata":{},"sourceType":"module"}