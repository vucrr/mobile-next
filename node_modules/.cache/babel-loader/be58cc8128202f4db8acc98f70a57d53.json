{"ast":null,"code":"import _Modal from \"antd-mobile/lib/modal\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport classnames from 'classnames';\nimport { Icon } from 'components';\nimport React from 'react';\nimport styles from \"./PopupModal.less\";\n\nfunction closest(el, selector) {\n  var matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector;\n\n  while (el) {\n    if (matchesSelector.call(el, selector)) {\n      return el;\n    }\n\n    el = el.parentElement;\n  }\n\n  return null;\n}\n\nvar MyModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MyModal, _React$Component);\n\n  function MyModal() {\n    _classCallCheck(this, MyModal);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MyModal).apply(this, arguments));\n  }\n\n  _createClass(MyModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          title = _this$props.title,\n          className = _this$props.className,\n          _onClose = _this$props.onClose,\n          children = _this$props.children,\n          bodyClassName = _this$props.bodyClassName,\n          reset = _objectWithoutProperties(_this$props, [\"title\", \"className\", \"onClose\", \"children\", \"bodyClassName\"]);\n\n      var onWrapTouchStart = function onWrapTouchStart(e) {\n        // fix touch to scroll background page on iOS\n        if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n          return;\n        }\n\n        var pNode = closest(e.target, '.am-modal-content');\n\n        if (!pNode) {\n          e.preventDefault();\n        }\n      };\n\n      var modalProps = _objectSpread({}, reset, {\n        className: classnames(styles.popup_modal, className),\n        wrapProps: {\n          onTouchStart: onWrapTouchStart\n        },\n        onClose: function onClose() {\n          _onClose && _onClose();\n        }\n      });\n\n      return React.createElement(_Modal, modalProps, React.createElement(_Flex, {\n        className: styles.header\n      }, React.createElement(_Flex.Item, {\n        className: styles.title\n      }, title), React.createElement(Icon, {\n        type: require('svg/close.svg'),\n        onClick: _onClose\n      })), React.createElement(\"div\", {\n        className: classnames(bodyClassName, 'popup-body')\n      }, children));\n    }\n  }]);\n\n  return MyModal;\n}(React.Component);\n\n_defineProperty(MyModal, \"defaultProps\", {\n  visible: false,\n  popup: true,\n  type: 'transparent',\n  animationType: 'slide-up',\n  maskClosable: true\n});\n\nexport default MyModal;","map":{"version":3,"sources":["/Users/viser/mobile-next/src/components/PopupModal/PopupModal.tsx"],"names":["classnames","Icon","React","styles","closest","el","selector","matchesSelector","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","call","parentElement","MyModal","props","title","className","onClose","children","bodyClassName","reset","onWrapTouchStart","e","test","navigator","userAgent","pNode","target","preventDefault","modalProps","popup_modal","wrapProps","onTouchStart","header","require","Component","visible","popup","type","animationType","maskClosable"],"mappings":";;;;;;;;;;AAEA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,IAAT,QAAqB,YAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;;AAEA,SAASC,OAAT,CAAiBC,EAAjB,EAA0BC,QAA1B,EAA4C;AAC1C,MAAMC,eAAe,GAAGF,EAAE,CAACG,OAAH,IAAcH,EAAE,CAACI,qBAAjB,IAA0CJ,EAAE,CAACK,kBAA7C,IAAmEL,EAAE,CAACM,iBAA9F;;AACA,SAAON,EAAP,EAAW;AACT,QAAIE,eAAe,CAACK,IAAhB,CAAqBP,EAArB,EAAyBC,QAAzB,CAAJ,EAAwC;AACtC,aAAOD,EAAP;AACD;;AACDA,IAAAA,EAAE,GAAGA,EAAE,CAACQ,aAAR;AACD;;AACD,SAAO,IAAP;AACD;;IAMKC,O;;;;;;;;;;;;;6BASK;AAAA,wBACkE,KAAKC,KADvE;AAAA,UACCC,KADD,eACCA,KADD;AAAA,UACQC,SADR,eACQA,SADR;AAAA,UACmBC,QADnB,eACmBA,OADnB;AAAA,UAC4BC,QAD5B,eAC4BA,QAD5B;AAAA,UACsCC,aADtC,eACsCA,aADtC;AAAA,UACwDC,KADxD;;AAGP,UAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,CAAD,EAAyC;AAChE;AACA,YAAI,CAAC,oBAAoBC,IAApB,CAAyBC,SAAS,CAACC,SAAnC,CAAL,EAAoD;AAClD;AACD;;AACD,YAAMC,KAAK,GAAGvB,OAAO,CAACmB,CAAC,CAACK,MAAH,EAAW,mBAAX,CAArB;;AACA,YAAI,CAACD,KAAL,EAAY;AACVJ,UAAAA,CAAC,CAACM,cAAF;AACD;AACF,OATD;;AAWA,UAAMC,UAAsB,qBACvBT,KADuB;AAE1BJ,QAAAA,SAAS,EAAEjB,UAAU,CAACG,MAAM,CAAC4B,WAAR,EAAqBd,SAArB,CAFK;AAG1Be,QAAAA,SAAS,EAAE;AAAEC,UAAAA,YAAY,EAAEX;AAAhB,SAHe;AAI1BJ,QAAAA,OAAO,EAAE,mBAAM;AACbA,UAAAA,QAAO,IAAIA,QAAO,EAAlB;AACD;AANyB,QAA5B;;AASA,aACE,4BAAWY,UAAX,EACE;AAAM,QAAA,SAAS,EAAE3B,MAAM,CAAC+B;AAAxB,SACE,0BAAM,IAAN;AAAW,QAAA,SAAS,EAAE/B,MAAM,CAACa;AAA7B,SAAqCA,KAArC,CADF,EAEE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAEmB,OAAO,CAAC,eAAD,CAAnB;AAAsC,QAAA,OAAO,EAAEjB;AAA/C,QAFF,CADF,EAKE;AAAK,QAAA,SAAS,EAAElB,UAAU,CAACoB,aAAD,EAAgB,YAAhB;AAA1B,SAA0DD,QAA1D,CALF,CADF;AASD;;;;EAzCmBjB,KAAK,CAACkC,S;;gBAAtBtB,O,kBACkB;AACpBuB,EAAAA,OAAO,EAAE,KADW;AAEpBC,EAAAA,KAAK,EAAE,IAFa;AAGpBC,EAAAA,IAAI,EAAE,aAHc;AAIpBC,EAAAA,aAAa,EAAE,UAJK;AAKpBC,EAAAA,YAAY,EAAE;AALM,C;;AA2CxB,eAAe3B,OAAf","sourcesContent":["import { Flex, Modal } from 'antd-mobile'\nimport { ModalProps } from 'antd-mobile/lib/modal/Modal'\nimport classnames from 'classnames'\nimport { Icon } from 'components'\nimport React from 'react'\nimport styles from './PopupModal.less'\n\nfunction closest(el: any, selector: string) {\n  const matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector\n  while (el) {\n    if (matchesSelector.call(el, selector)) {\n      return el\n    }\n    el = el.parentElement\n  }\n  return null\n}\n\ninterface MyModelProps extends ModalProps {\n  bodyClassName?: string\n}\n\nclass MyModal extends React.Component<MyModelProps> {\n  static defaultProps = {\n    visible: false,\n    popup: true,\n    type: 'transparent',\n    animationType: 'slide-up',\n    maskClosable: true,\n  }\n\n  render() {\n    const { title, className, onClose, children, bodyClassName, ...reset } = this.props\n\n    const onWrapTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n      // fix touch to scroll background page on iOS\n      if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n        return\n      }\n      const pNode = closest(e.target, '.am-modal-content')\n      if (!pNode) {\n        e.preventDefault()\n      }\n    }\n\n    const modalProps: ModalProps = {\n      ...reset,\n      className: classnames(styles.popup_modal, className),\n      wrapProps: { onTouchStart: onWrapTouchStart },\n      onClose: () => {\n        onClose && onClose()\n      },\n    }\n\n    return (\n      <Modal {...modalProps}>\n        <Flex className={styles.header}>\n          <Flex.Item className={styles.title}>{title}</Flex.Item>\n          <Icon type={require('svg/close.svg')} onClick={onClose} />\n        </Flex>\n        <div className={classnames(bodyClassName, 'popup-body')}>{children}</div>\n      </Modal>\n    )\n  }\n}\n\nexport default MyModal\n"]},"metadata":{},"sourceType":"module"}